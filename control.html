<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>control panel</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
<div style="height: 1rem"></div>
<div id="buttonCont">
    <button class="button" onclick="createOrder('Burger')">Send burger to KDS</button>
    <button class="button" onclick="createOrder('Cheeseburger')">Send cheeseburger to KDS</button>
    <button class="button" onclick="createOrder('Taco')">Send TACO to KDS</button>
    <button class="button" onclick="createOrder('Fries')">Send Fries to KDS</button>
    <button class="button" onclick="createOrder('Ribs')">Send Ribs to KDS</button>
    <button class="button" onclick="cancel()">Send random cancel to KDS</button>
    <button class="button" onclick="clr()">Send clear to KDS</button>
    <button class="button" onclick="show()">show local</button>
</div>

<script>
    function createOrder(food) {
        var key = localStorage.getItem("key");
        localStorage.setItem("item" + key, food);
        console.log(localStorage.getItem("item" + key));
        keyInc()
    }


    function keyInc() {
        var key = parseInt(localStorage.getItem("key"), 10)
        console.log(key)
        key = key + 1
        console.log(key)
        localStorage.setItem("key", key)
        console.log(localStorage.getItem("key"))
    }


    function KeyDec() {
        var key = parseInt(localStorage.getItem("key"), 10)
        console.log(key)
        key = key - 1
        console.log(key)
        localStorage.setItem("key", key)
        console.log(localStorage.getItem("key"))
    }


    function cancel() {
        let array = []
        let key = localStorage.getItem("key") - 1
        console.log("key:" + key)
        random = Math.floor(Math.random() * key) + 1;
        console.log("deleting item" + random)

        for (i = 1; i < key; i++) {
            console.log("loop")
            if (i==random) {
                console.log("gone")
            }
            else {
                array.push(localStorage.getItem("item" + i))

            }
        }

        localStorage.clear()
        localStorage.setItem("key", 1)
        for (i = 0; i < array.length; i++) {
          createOrder(array[i])
        }
    }


    function show() {
        console.log("key:" + localStorage.getItem("key"))
        for (i = 1; i < localStorage.getItem("key"); i++) {
            console.log("item" + i + ":" + localStorage.getItem("item" + i))
        }
    }


    function clr() {
        localStorage.clear()
        localStorage.setItem("key", 1)
        console.log("cleared")
    }
</script>


</body>
</html>